(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{bGXe:function(e,t,a){"use strict";a.r(t);a("YtvS");var r,n,i,l,o,s,c,d,m,u,p,f,h,g,y=a("LEWJ"),b=(a("QLjv"),a("CdBJ")),E=(a("Dqp0"),a("8aEC")),v=(a("Pb9K"),a("wGXw")),w=(a("VRdF"),a("8KCr")),S=(a("l5rB"),a("iXBC")),C=(a("kVCf"),a("iI92")),z=(a("DpyA"),a("3dmf")),k=(a("r09B"),a("qwyM")),R=a("zAuD"),x=a.n(R),D=(a("twMU"),a("T310")),L=a("mK77"),T=a.n(L),V=a("43Yg"),O=a.n(V),j=a("/tCh"),A=a.n(j),M=a("scpF"),F=a.n(M),P=a("O/V9"),q=a.n(P),B=a("8aBX"),N=a.n(B),Y=(a("1Wpj"),a("jl3E")),K=(a("Bler"),a("CS+4")),H=(a("xKti"),a("PXOp")),J=a("uqIC"),I=a.n(J),X=a("LneV"),G=a("lyEg"),_=a.n(G),W=(a("u6A/"),a("YyKD")),Q=a.n(W),U=a("jCnN"),Z=a("w0Vw"),$=a.n(Z),ee=a("SaYD"),te=H["a"].Item,ae=K["a"].TextArea,re=Y["a"].Panel,ne={xs:24,sm:12,md:12,lg:10,xl:8,xxl:6,style:{marginTop:10,marginRight:0,marginBottom:0,marginLeft:0}},ie={},le={},oe=(r=Object(X["connect"])(function(e){var t=e.redisadmin,a=e.loading;return{redisadmin:t,loading:a.models.redisadmin}}),n=H["a"].create({name:"redisHomeSearch"}),r(i=n((l=function(e){function t(){var e,a;O()(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=F()(this,(e=q()(t)).call.apply(e,[this].concat(n))),a.state={formValues:[]},a.handleSearch=function(e){e.preventDefault();var t=a.props,r=(t.dispatch,t.form);r.validateFields(function(e,t){if(!e){var r=T()({},t);a.setState({formValues:r}),le=r,h.refeshList(le)}})},a.handleFormReset=function(){var e=a.props,t=e.form;e.dispatch;t.resetFields(),a.setState({formValues:{}}),le={},h.refeshList(le)},a}return N()(t,e),A()(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=(this.state.formValues,function(){return I.a.createElement(D["a"],{type:"search",onClick:function(e){}})});return I.a.createElement(C["a"],{gutter:24,style:{margin:0}},I.a.createElement(Y["a"],{defaultActiveKey:["1"]},I.a.createElement(re,{header:"\u641c\u7d22",key:"10",extra:t()},I.a.createElement(H["a"],{onSubmit:this.handleSearch,layout:"inline"},I.a.createElement(ee["a"],{title:"\u67e5\u8be2\u6761\u4ef6",grid:!0,last:!0},I.a.createElement(C["a"],{gutter:16},I.a.createElement(k["a"],{xxl:6,xl:8,lg:10,md:12,sm:15,xs:25,style:{marginRight:-88}},I.a.createElement(te,x()({},ie,{label:""}),e("searchKey",{rules:[{required:!1,message:"\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}]})(I.a.createElement(K["a"],{autoComplete:"off",onPressEnter:this.handleSearch,placeholder:""})))),I.a.createElement(k["a"],{xxl:6,xl:8,lg:10,md:12,sm:15,xs:25},I.a.createElement(z["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),I.a.createElement(z["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"))))))))}}]),t}(J["PureComponent"]),i=l))||i)||i),se='import org.springframework.core.convert.converter.Converter\nimport org.springframework.core.serializer.support.DeserializingConverter\nimport org.springframework.core.serializer.support.SerializingConverter\nimport org.springframework.data.redis.serializer.RedisSerializer\nimport org.springframework.data.redis.serializer.SerializationException\nimport org.springframework.data.redis.serializer.StringRedisSerializer\n\npublic class CustomRedisConfig extends Script{\n\n    public void setRedisTemplateSerializer(){\n        customRedisTemplate.setValueSerializer(new CustomValueRedisObjectSerializer());\n        customRedisTemplate.setHashValueSerializer(new CustomValueRedisObjectSerializer());\n        customRedisTemplate.setKeySerializer(new StringRedisSerializer());\n        customRedisTemplate.setHashKeySerializer(new StringRedisSerializer());\n    }\n\n    @Override\n    Object run() {\n        return setRedisTemplateSerializer();\n    }\n}\n\npublic class CustomValueRedisObjectSerializer implements RedisSerializer<Object> {\n\n    private Converter<Object, byte[]> serializer = new SerializingConverter();\n    private Converter<byte[], Object> deserializer = new DeserializingConverter();\n\n    static final byte[] EMPTY_ARRAY = new byte[0];\n\n    public Object deserialize(byte[] bytes) {\n        if (isEmpty(bytes)) {\n            return null;\n        }\n\n        try {\n            return deserializer.convert(bytes);\n        } catch (Exception ex) {\n            throw new SerializationException("Cannot deserialize", ex);\n        }\n    }\n\n    public byte[] serialize(Object object) {\n        if (object == null) {\n            return EMPTY_ARRAY;\n        }\n\n        try {\n            return serializer.convert(object);\n        } catch (Exception ex) {\n            return EMPTY_ARRAY;\n        }\n    }\n\n    private boolean isEmpty(byte[] data) {\n        return (data == null || data.length == 0);\n    }\n}',ce=(o=Object(X["connect"])(function(e){var t=e.redisadmin,a=e.loading;return{redisadmin:t,loading:a.models.redisadmin}}),s=H["a"].create({name:"redisHomeView"}),o(c=s((d=function(e){function t(){var e,a;O()(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=F()(this,(e=q()(t)).call.apply(e,[this].concat(n))),a.state={visible:!1,drawerTitle:"",data:{}},a.showDrawer=function(){a.setState({drawerTitle:"show example",visible:!0,data:{serCode:se}})},a.onClose=function(){a.setState({visible:!1})},a}return N()(t,e),A()(t,[{key:"componentDidMount",value:function(){console.log(this.state),console.log("redis-HomeView-init");this.props.dispatch;g=this}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.data;return I.a.createElement("div",null,I.a.createElement(S["a"],{title:this.state.drawerTitle,width:"70%",onClose:this.onClose,visible:this.state.visible},I.a.createElement(H["a"],{layout:"vertical",hideRequiredMark:!0},I.a.createElement(C["a"],{gutter:16},I.a.createElement(k["a"],{span:24},I.a.createElement(te,{label:"Serializable code example"},e("serCode",{rules:[{required:!1,message:"Serializable code"}],initialValue:t.serCode})(I.a.createElement(Q.a,{width:"100%",height:"600",language:"JavaScript",theme:"vs-dark",value:t.serCode,options:{selectOnLineNumbers:!0}})))))),I.a.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},I.a.createElement(z["a"],{onClick:this.onClose,style:{marginRight:8}},"close"))))}}]),t}(I.a.Component),c=d))||c)||c),de=(m=Object(X["connect"])(function(e){var t=e.redisadmin,a=e.loading;return{redisadmin:t,loading:a.models.redisadmin}}),u=H["a"].create({name:"redisHome"}),m(p=u((f=function(e){function t(){var e,a;O()(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=F()(this,(e=q()(t)).call.apply(e,[this].concat(n))),a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.state={visible:!1,done:!1,dataLoading:!0},a.refeshList=function(e){a.setState({dataLoading:!0});var t=a.props.dispatch;t({type:"redisadmin/fetchConfigList",payload:e,callback:function(){console.log("fetchConfigListcallback"),a.setState({dataLoading:!1})}})},a.toRedisDataPage=function(e){_.a.push("/redis/data/".concat(e))},a.showModal=function(){a.setState({visible:!0,current:void 0})},a.showEditDrawer=function(){g.showDrawer()},a.deleteModel=function(e){w["a"].confirm({title:"\u5220\u9664\u8fde\u63a5",content:"\u786e\u5b9a\u5220\u9664\u3010".concat(e.name,"\u3011\u8fd9\u4e2aredis\u8fde\u63a5\u4fe1\u606f\u5417\uff1f"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){return a.deleteItem(e.id)}})},a.showEditModal=function(e){console.log(e),a.setState({visible:!0,current:e}),e},a.handleDone=function(){setTimeout(function(){return a.addBtn.blur()},0),a.setState({done:!1,visible:!1})},a.handleCancel=function(){setTimeout(function(){return a.addBtn.blur()},0),a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,r=t.dispatch,n=t.form,i=a.state.current,l=i?i.id:"";console.log(i),setTimeout(function(){return a.addBtn.blur()},0),n.validateFieldsAndScroll(function(e,t){if(!e){a.setState({done:!1,visible:!1});var n=T()({},t);console.log(n),r({type:l?"redisadmin/updateConfig":"redisadmin/addConfig",payload:T()({id:l},n),callback:function(){console.log(l?"true":"false"),console.log("submitcallback"),a.refeshList(le)}})}})},a.deleteItem=function(e){console.log(e);var t=a.props.dispatch;t({type:"redisadmin/removeConfig",payload:e,callback:function(){a.refeshList(le)}})},a}return N()(t,e),A()(t,[{key:"componentDidMount",value:function(){console.log("redis-home-init"),this.refeshList(le);var e=this.props,t=e.redisadmin;e.loading;console.log(t),h=this}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,r=a.redisadmin,n=(a.loading,r.configList),i=this.state,l=i.visible,o=i.done,s=i.current,c=void 0===s?{}:s,d=n.map(function(t,a){return I.a.createElement(k["a"],x()({},ne,{key:t.id}),I.a.createElement(v["a"],{bordered:!1,size:"small",title:"[".concat(t.name,"]redis\u8fde\u63a5\u4fe1\u606f"),extra:I.a.createElement("a",{title:"\u5220\u9664\u94fe\u63a5",onClick:function(a){a.preventDefault(),e.deleteModel(t)}},I.a.createElement(D["a"],{type:"close-circle",theme:"twoTone",width:50,height:50})),style:{},hoverable:"true",onDoubleClick:function(a){a.preventDefault(),e.toRedisDataPage(t.id)},actions:[I.a.createElement("a",{onClick:function(a){a.preventDefault(),e.showEditModal(t)}},"\u8fde\u63a5\u4fe1\u606f"),I.a.createElement("a",{onClick:function(a){a.preventDefault(),e.toRedisDataPage(t.id)}},"\u6570\u636e\u4fe1\u606f")]},I.a.createElement("p",{className:$.a.pStyle},"\u540d\u79f0\uff1a",t.name),I.a.createElement("p",{className:$.a.pStyle},"\u7c7b\u578b\uff1a",1===t.type?"\u5355\u673a":2===t.type?"\u96c6\u7fa4":"\u672a\u77e5"),I.a.createElement("p",{className:$.a.pStyle,title:t.address},"\u5730\u5740\uff1a",t.address),I.a.createElement("p",{className:$.a.pStyle},"\u521b\u5efa\u65f6\u95f4\uff1a",t.createTime),I.a.createElement("p",{className:$.a.pStyle,title:t.note},"\u5907\u6ce8\uff1a",t.note?t.note:"-")))}),m=o?{footer:null,onCancel:this.handleDone}:{okText:"\u4fdd\u5b58",onOk:this.handleSubmit,onCancel:this.handleCancel},u=function(){return I.a.createElement(H["a"],{onSubmit:e.handleSubmit},I.a.createElement(te,x()({label:"\u540d\u79f0"},e.formLayout),t("name",{rules:[{required:!0,message:"\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:c.name})(I.a.createElement(K["a"],{autoComplete:"off",placeholder:"\u7ed9redis\u8fde\u63a5\u53d6\u4e2a\u540d\u79f0\u5427"}))),I.a.createElement(te,x()({label:"\u7c7b\u578b"},e.formLayout),t("type",{rules:[{required:!0,message:"\u7c7b\u578b\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:c.type})(I.a.createElement(E["a"].Group,null,I.a.createElement(E["a"],{value:1},"\u5355\u673a"),I.a.createElement(E["a"],{value:2},"\u96c6\u7fa4")))),I.a.createElement(te,x()({},e.formLayout,{label:I.a.createElement("span",null,"\u5730\u5740\xa0",I.a.createElement("em",{className:$.a.optional},I.a.createElement(b["a"],{title:"\u5355\u673a\u5730\u5740\uff1a192.168.1.32:6379  \u96c6\u7fa4\u5730\u5740\uff1a192.168.1.32:7000,192.168.1.32:7001,192.168.1.32:7002,192.168.1.32:7003,192.168.1.32:7004,192.168.1.32:7005"},I.a.createElement(D["a"],{type:"info-circle-o",style:{marginRight:4}}))))}),t("address",{rules:[{required:!0,message:"\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:c.address})(I.a.createElement(K["a"],{autoComplete:"off",placeholder:"redis\u8fde\u63a5\u5730\u5740"}))),I.a.createElement(te,x()({label:"\u5bc6\u7801"},e.formLayout),t("password",{rules:[{required:!1,message:"\u5bc6\u7801\u4fe1\u606f"}],initialValue:c.password})(I.a.createElement(K["a"].Password,{autoComplete:"off",type:"password",placeholder:"redis\u7684\u5bc6\u7801"}))),I.a.createElement(te,x()({},e.formLayout,{label:I.a.createElement("span",{onClick:e.showEditDrawer},"Serializable code\xa0",I.a.createElement("em",{className:$.a.optional},I.a.createElement(b["a"],{title:"\u70b9\u51fb\u67e5\u770b\u4f8b\u5b50"},I.a.createElement(D["a"],{type:"info-circle-o",style:{marginRight:4,cursor:"pointer"}}))))}),t("serCode",{rules:[{required:!1,message:"Serializable code"}],initialValue:c.serCode})(I.a.createElement(ae,{placeholder:"\u5e8f\u5217\u5316code(Groovy)\u3002\u9ed8\u8ba4key\u548chashkey\u4f7f\u7528\uff1aStringRedisSerializer\uff1bvalue\u548chashvalue\u4f7f\u7528\uff1aJdkSerializationRedisSerializer",rows:4}))),I.a.createElement(te,x()({},e.formLayout,{label:"\u5907\u6ce8"}),t("note",{rules:[{required:!1,message:"\u5907\u6ce8"}],initialValue:c.note})(I.a.createElement(ae,{placeholder:"\u5907\u6ce8",rows:2}))))};return I.a.createElement("div",null,I.a.createElement(oe,null),I.a.createElement(C["a"],{gutter:24,style:{marginTop:0}},I.a.createElement(y["a"],{spinning:this.state.dataLoading,delay:500},d,I.a.createElement(k["a"],ne,I.a.createElement(v["a"],{bordered:!1,size:"small",title:"\u65b0\u5efaredis\u8fde\u63a5\u4fe1\u606f",style:{},hoverable:"true"},I.a.createElement("p",null,I.a.createElement(z["a"],{type:"dashed",style:{width:"80%",margin:20},icon:"plus",onClick:this.showModal,ref:function(t){e.addBtn=Object(U["findDOMNode"])(t)}},"\u6dfb\u52a0")))))),I.a.createElement(w["a"],x()({title:o?null:"".concat(c.id?"\u7f16\u8f91redis\u8fde\u63a5\u4fe1\u606f":"\u6dfb\u52a0redis\u8fde\u63a5\u4fe1\u606f"),className:$.a.standardListForm,width:640,bodyStyle:o?{padding:"5px 0"}:{padding:"5px 0 0"},destroyOnClose:!0,visible:l},m),u()),I.a.createElement(ce,null))}}]),t}(J["PureComponent"]),p=f))||p)||p);t["default"]=de},w0Vw:function(e,t,a){e.exports={standardListForm:"antd-pro-pages-redis-redis-home-page-standardListForm",formResult:"antd-pro-pages-redis-redis-home-page-formResult",pStyle:"antd-pro-pages-redis-redis-home-page-pStyle"}}}]);