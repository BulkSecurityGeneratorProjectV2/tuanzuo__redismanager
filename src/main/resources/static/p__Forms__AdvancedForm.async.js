(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{JDLn:function(e,a,t){e.exports={toolbar:"antd-pro-components-footer-toolbar-index-toolbar",left:"antd-pro-components-footer-toolbar-index-left",right:"antd-pro-components-footer-toolbar-index-right"}},erBf:function(e,a,t){"use strict";t.r(a);t("Qvpi");var n=t("TPxm"),r=(t("KfpK"),t("3/Dp")),l=(t("7Bnr"),t("ovu2")),o=(t("xYi0"),t("/x81")),i=(t("VFYf"),t("KtH6")),c=(t("B/yZ"),t("CZsP")),s=(t("71bq"),t("T50b")),m=(t("xXtT"),t("L+jO")),u=t("Pjwa"),d=t.n(u),p=t("2cji"),h=t.n(p),v=t("sp3j"),f=t.n(v),E=t("vZkh"),y=t.n(E),g=t("+KCP"),k=t.n(g),w=(t("/Clt"),t("hJLW")),b=(t("h/8O"),t("yndI")),C=(t("CqAe"),t("25Jm")),x=t("ee5G"),I=t.n(x),N=t("LneV"),F=t("U1Sa"),P=t.n(F),q=t("lndb"),R=t.n(q),K=t("EH+i"),L=t.n(K),S=t("iczh"),D=t.n(S),T=t("JDLn"),z=t.n(T),B=function(e){function a(){var e,t;d()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=f()(this,(e=y()(a)).call.apply(e,[this].concat(r))),t.state={width:void 0},t.resizeFooterToolbar=function(){var e=document.querySelector(".ant-layout-sider");if(null!=e){var a=t.context.isMobile,n=a?null:"calc(100% - ".concat(e.style.width,")"),r=t.state.width;r!==n&&t.setState({width:n})}},t}return k()(a,e),h()(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeFooterToolbar),this.resizeFooterToolbar()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeFooterToolbar)}},{key:"render",value:function(){var e=this.props,a=e.children,t=e.className,n=e.extra,r=R()(e,["children","className","extra"]),l=this.state.width;return I.a.createElement("div",P()({className:D()(t,z.a.toolbar),style:{width:l}},r),I.a.createElement("div",{className:z.a.left},n),I.a.createElement("div",{className:z.a.right},a))}}]),a}(x["Component"]);B.contextTypes={isMobile:L.a.bool};var O,J,A,M,j=t("zHco"),U=(t("s0TA"),t("ogLn")),V=(t("KnDF"),t("vL7J")),W=(t("DUmq"),t("PGjP")),Z=(t("LLRu"),t("JxEI")),G=t("smUt"),H=t.n(G),Y=t("yKc7"),_=t.n(Y),Q=t("Zpge"),X=t.n(Q),$=function(e){function a(e){var t;return d()(this,a),t=f()(this,y()(a).call(this,e)),t.index=0,t.cacheOriginData={},t.toggleEditable=function(e,a){e.preventDefault();var n=t.state.data,r=n.map(function(e){return H()({},e)}),l=t.getRowByKey(a,r);l&&(l.editable||(t.cacheOriginData[a]=H()({},l)),l.editable=!l.editable,t.setState({data:r}))},t.newMember=function(){var e=t.state.data,a=e.map(function(e){return H()({},e)});a.push({key:"NEW_TEMP_ID_".concat(t.index),workId:"",name:"",department:"",editable:!0,isNew:!0}),t.index+=1,t.setState({data:a})},t.state={data:e.value,loading:!1,value:e.value},t}return k()(a,e),h()(a,[{key:"getRowByKey",value:function(e,a){var t=this.state.data;return(a||t).filter(function(a){return a.key===e})[0]}},{key:"remove",value:function(e){var a=this.state.data,t=this.props.onChange,n=a.filter(function(a){return a.key!==e});this.setState({data:n}),t(n)}},{key:"handleKeyPress",value:function(e,a){"Enter"===e.key&&this.saveRow(e,a)}},{key:"handleFieldChange",value:function(e,a,t){var n=this.state.data,r=n.map(function(e){return H()({},e)}),l=this.getRowByKey(t,r);l&&(l[a]=e.target.value,this.setState({data:r}))}},{key:"saveRow",value:function(e,a){var t=this;e.persist(),this.setState({loading:!0}),setTimeout(function(){if(t.clickedCancel)t.clickedCancel=!1;else{var n=t.getRowByKey(a)||{};if(!n.workId||!n.name||!n.department)return Z["a"].error("\u8bf7\u586b\u5199\u5b8c\u6574\u6210\u5458\u4fe1\u606f\u3002"),e.target.focus(),void t.setState({loading:!1});delete n.isNew,t.toggleEditable(e,a);var r=t.state.data,l=t.props.onChange;l(r),t.setState({loading:!1})}},500)}},{key:"cancel",value:function(e,a){this.clickedCancel=!0,e.preventDefault();var t=this.state.data,n=t.map(function(e){return H()({},e)}),r=this.getRowByKey(a,n);this.cacheOriginData[a]&&(Object.assign(r,this.cacheOriginData[a]),delete this.cacheOriginData[a]),r.editable=!1,this.setState({data:n}),this.clickedCancel=!1}},{key:"render",value:function(){var e=this,a=[{title:"\u6210\u5458\u59d3\u540d",dataIndex:"name",key:"name",width:"20%",render:function(a,t){return t.editable?I.a.createElement(c["a"],{value:a,autoFocus:!0,onChange:function(a){return e.handleFieldChange(a,"name",t.key)},onKeyPress:function(a){return e.handleKeyPress(a,t.key)},placeholder:"\u6210\u5458\u59d3\u540d"}):a}},{title:"\u5de5\u53f7",dataIndex:"workId",key:"workId",width:"20%",render:function(a,t){return t.editable?I.a.createElement(c["a"],{value:a,onChange:function(a){return e.handleFieldChange(a,"workId",t.key)},onKeyPress:function(a){return e.handleKeyPress(a,t.key)},placeholder:"\u5de5\u53f7"}):a}},{title:"\u6240\u5c5e\u90e8\u95e8",dataIndex:"department",key:"department",width:"40%",render:function(a,t){return t.editable?I.a.createElement(c["a"],{value:a,onChange:function(a){return e.handleFieldChange(a,"department",t.key)},onKeyPress:function(a){return e.handleKeyPress(a,t.key)},placeholder:"\u6240\u5c5e\u90e8\u95e8"}):a}},{title:"\u64cd\u4f5c",key:"action",render:function(a,t){var n=e.state.loading;return t.editable&&n?null:t.editable?t.isNew?I.a.createElement("span",null,I.a.createElement("a",{onClick:function(a){return e.saveRow(a,t.key)}},"\u6dfb\u52a0"),I.a.createElement(W["a"],{type:"vertical"}),I.a.createElement(V["a"],{title:"\u662f\u5426\u8981\u5220\u9664\u6b64\u884c\uff1f",onConfirm:function(){return e.remove(t.key)}},I.a.createElement("a",null,"\u5220\u9664"))):I.a.createElement("span",null,I.a.createElement("a",{onClick:function(a){return e.saveRow(a,t.key)}},"\u4fdd\u5b58"),I.a.createElement(W["a"],{type:"vertical"}),I.a.createElement("a",{onClick:function(a){return e.cancel(a,t.key)}},"\u53d6\u6d88")):I.a.createElement("span",null,I.a.createElement("a",{onClick:function(a){return e.toggleEditable(a,t.key)}},"\u7f16\u8f91"),I.a.createElement(W["a"],{type:"vertical"}),I.a.createElement(V["a"],{title:"\u662f\u5426\u8981\u5220\u9664\u6b64\u884c\uff1f",onConfirm:function(){return e.remove(t.key)}},I.a.createElement("a",null,"\u5220\u9664")))}}],t=this.state,r=t.loading,l=t.data;return I.a.createElement(x["Fragment"],null,I.a.createElement(U["a"],{loading:r,columns:a,dataSource:l,pagination:!1,rowClassName:function(e){return e.editable?X.a.editable:""}}),I.a.createElement(n["a"],{style:{width:"100%",marginTop:16,marginBottom:8},type:"dashed",onClick:this.newMember,icon:"plus"},"\u65b0\u589e\u6210\u5458"))}}],[{key:"getDerivedStateFromProps",value:function(e,a){return _()(e.value,a.value)?null:{data:e.value,value:e.value}}}]),a}(x["PureComponent"]),ee=$,ae=C["a"].Option,te=b["a"].RangePicker,ne={name:"\u4ed3\u5e93\u540d",url:"\u4ed3\u5e93\u57df\u540d",owner:"\u4ed3\u5e93\u7ba1\u7406\u5458",approver:"\u5ba1\u6279\u4eba",dateRange:"\u751f\u6548\u65e5\u671f",type:"\u4ed3\u5e93\u7c7b\u578b",name2:"\u4efb\u52a1\u540d",url2:"\u4efb\u52a1\u63cf\u8ff0",owner2:"\u6267\u884c\u4eba",approver2:"\u8d23\u4efb\u4eba",dateRange2:"\u751f\u6548\u65e5\u671f",type2:"\u4efb\u52a1\u7c7b\u578b"},re=[{key:"1",workId:"00001",name:"John Brown",department:"New York No. 1 Lake Park"},{key:"2",workId:"00002",name:"Jim Green",department:"London No. 1 Lake Park"},{key:"3",workId:"00003",name:"Joe Black",department:"Sidney No. 1 Lake Park"}],le=(O=Object(N["connect"])(function(e){var a=e.loading;return{submitting:a.effects["form/submitAdvancedForm"]}}),J=w["a"].create(),O(A=J((M=function(e){function a(){var e,t;d()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=f()(this,(e=y()(a)).call.apply(e,[this].concat(r))),t.state={width:"100%"},t.getErrorInfo=function(){var e=t.props.form.getFieldsError,a=e(),n=Object.keys(a).filter(function(e){return a[e]}).length;if(!a||0===n)return null;var r=function(e){var a=document.querySelector('label[for="'.concat(e,'"]'));a&&a.scrollIntoView(!0)},l=Object.keys(a).map(function(e){return a[e]?I.a.createElement("li",{key:e,className:X.a.errorListItem,onClick:function(){return r(e)}},I.a.createElement(m["a"],{type:"cross-circle-o",className:X.a.errorIcon}),I.a.createElement("div",{className:X.a.errorMessage},a[e][0]),I.a.createElement("div",{className:X.a.errorField},ne[e])):null});return I.a.createElement("span",{className:X.a.errorIcon},I.a.createElement(s["a"],{title:"\u8868\u5355\u6821\u9a8c\u4fe1\u606f",content:l,overlayClassName:X.a.errorPopover,trigger:"click",getPopupContainer:function(e){return e.parentNode}},I.a.createElement(m["a"],{type:"exclamation-circle"})),n)},t.resizeFooterToolbar=function(){requestAnimationFrame(function(){var e=document.querySelectorAll(".ant-layout-sider")[0];if(e){var a="calc(100% - ".concat(e.style.width,")"),n=t.state.width;n!==a&&t.setState({width:a})}})},t.validate=function(){var e=t.props,a=e.form.validateFieldsAndScroll,n=e.dispatch;a(function(e,a){e||n({type:"form/submitAdvancedForm",payload:a})})},t}return k()(a,e),h()(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeFooterToolbar,{passive:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeFooterToolbar)}},{key:"render",value:function(){var e=this.props,a=e.form.getFieldDecorator,t=e.submitting,s=this.state.width;return I.a.createElement(j["a"],{title:"\u9ad8\u7ea7\u8868\u5355",content:"\u9ad8\u7ea7\u8868\u5355\u5e38\u89c1\u4e8e\u4e00\u6b21\u6027\u8f93\u5165\u548c\u63d0\u4ea4\u5927\u6279\u91cf\u6570\u636e\u7684\u573a\u666f\u3002",wrapperClassName:X.a.advancedForm},I.a.createElement(l["a"],{title:"\u4ed3\u5e93\u7ba1\u7406",className:X.a.card,bordered:!1},I.a.createElement(w["a"],{layout:"vertical",hideRequiredMark:!0},I.a.createElement(o["a"],{gutter:16},I.a.createElement(i["a"],{lg:6,md:12,sm:24},I.a.createElement(w["a"].Item,{label:ne.name},a("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ed3\u5e93\u540d\u79f0"}]})(I.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u4ed3\u5e93\u540d\u79f0"})))),I.a.createElement(i["a"],{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24},I.a.createElement(w["a"].Item,{label:ne.url},a("url",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}]})(I.a.createElement(c["a"],{style:{width:"100%"},addonBefore:"http://",addonAfter:".com",placeholder:"\u8bf7\u8f93\u5165"})))),I.a.createElement(i["a"],{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24},I.a.createElement(w["a"].Item,{label:ne.owner},a("owner",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7ba1\u7406\u5458"}]})(I.a.createElement(C["a"],{placeholder:"\u8bf7\u9009\u62e9\u7ba1\u7406\u5458"},I.a.createElement(ae,{value:"xiao"},"\u4ed8\u6653\u6653"),I.a.createElement(ae,{value:"mao"},"\u5468\u6bdb\u6bdb")))))),I.a.createElement(o["a"],{gutter:16},I.a.createElement(i["a"],{lg:6,md:12,sm:24},I.a.createElement(w["a"].Item,{label:ne.approver},a("approver",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5ba1\u6279\u5458"}]})(I.a.createElement(C["a"],{placeholder:"\u8bf7\u9009\u62e9\u5ba1\u6279\u5458"},I.a.createElement(ae,{value:"xiao"},"\u4ed8\u6653\u6653"),I.a.createElement(ae,{value:"mao"},"\u5468\u6bdb\u6bdb"))))),I.a.createElement(i["a"],{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24},I.a.createElement(w["a"].Item,{label:ne.dateRange},a("dateRange",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u751f\u6548\u65e5\u671f"}]})(I.a.createElement(te,{placeholder:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],style:{width:"100%"}})))),I.a.createElement(i["a"],{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24},I.a.createElement(w["a"].Item,{label:ne.type},a("type",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4ed3\u5e93\u7c7b\u578b"}]})(I.a.createElement(C["a"],{placeholder:"\u8bf7\u9009\u62e9\u4ed3\u5e93\u7c7b\u578b"},I.a.createElement(ae,{value:"private"},"\u79c1\u5bc6"),I.a.createElement(ae,{value:"public"},"\u516c\u5f00")))))))),I.a.createElement(l["a"],{title:"\u4efb\u52a1\u7ba1\u7406",className:X.a.card,bordered:!1},I.a.createElement(w["a"],{layout:"vertical",hideRequiredMark:!0},I.a.createElement(o["a"],{gutter:16},I.a.createElement(i["a"],{lg:6,md:12,sm:24},I.a.createElement(w["a"].Item,{label:ne.name2},a("name2",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}]})(I.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),I.a.createElement(i["a"],{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24},I.a.createElement(w["a"].Item,{label:ne.url2},a("url2",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}]})(I.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),I.a.createElement(i["a"],{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24},I.a.createElement(w["a"].Item,{label:ne.owner2},a("owner2",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7ba1\u7406\u5458"}]})(I.a.createElement(C["a"],{placeholder:"\u8bf7\u9009\u62e9\u7ba1\u7406\u5458"},I.a.createElement(ae,{value:"xiao"},"\u4ed8\u6653\u6653"),I.a.createElement(ae,{value:"mao"},"\u5468\u6bdb\u6bdb")))))),I.a.createElement(o["a"],{gutter:16},I.a.createElement(i["a"],{lg:6,md:12,sm:24},I.a.createElement(w["a"].Item,{label:ne.approver2},a("approver2",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5ba1\u6279\u5458"}]})(I.a.createElement(C["a"],{placeholder:"\u8bf7\u9009\u62e9\u5ba1\u6279\u5458"},I.a.createElement(ae,{value:"xiao"},"\u4ed8\u6653\u6653"),I.a.createElement(ae,{value:"mao"},"\u5468\u6bdb\u6bdb"))))),I.a.createElement(i["a"],{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24},I.a.createElement(w["a"].Item,{label:ne.dateRange2},a("dateRange2",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}]})(I.a.createElement(r["a"],{placeholder:"\u63d0\u9192\u65f6\u95f4",style:{width:"100%"},getPopupContainer:function(e){return e.parentNode}})))),I.a.createElement(i["a"],{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24},I.a.createElement(w["a"].Item,{label:ne.type2},a("type2",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4ed3\u5e93\u7c7b\u578b"}]})(I.a.createElement(C["a"],{placeholder:"\u8bf7\u9009\u62e9\u4ed3\u5e93\u7c7b\u578b"},I.a.createElement(ae,{value:"private"},"\u79c1\u5bc6"),I.a.createElement(ae,{value:"public"},"\u516c\u5f00")))))))),I.a.createElement(l["a"],{title:"\u6210\u5458\u7ba1\u7406",bordered:!1},a("members",{initialValue:re})(I.a.createElement(ee,null))),I.a.createElement(B,{style:{width:s}},this.getErrorInfo(),I.a.createElement(n["a"],{type:"primary",onClick:this.validate,loading:t},"\u63d0\u4ea4")))}}]),a}(x["PureComponent"]),A=M))||A)||A);a["default"]=le}}]);